<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ==========================================================  -->
<!-- Configuration for mybatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>maven-mybatisdalgen-plugin</tt>, a DAL          -->
<!-- code generation utility specially developed for <tt>mybatis</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/(bundle-name)-dal</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>mvn mydalgen:mybatis</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- ============================================================================= -->

<mapper namespace="com.haiziyouke.db.dao.ThirdLoginDAO">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->


    <!-- result maps for database table edu_third_login -->
    <resultMap id="RM-THIRD-LOGIN" type="com.haiziyouke.db.model.ThirdLoginDO">
        <result property="id" column="id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
        <result property="userId" column="userId" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="openId" column="openId" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="openMethod" column="openMethod" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="unionId" column="unionId" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="publicOpenId" column="publicOpenId" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="deleted" column="deleted" javaType="java.lang.Boolean" jdbcType="BIT"/>
    </resultMap>


    <!-- ============================================= -->
    <!-- mapped statements for ThirdLoginDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for ThirdLoginDAO.insertThirdUser -->
		<insert id="insertThirdUser">
			insert into edu_third_login(userId,openId,openMethod,unionId,publicOpenId,deleted)
			values(#{userId},#{openId},#{openMethod},#{unionId},#{publicOpenId},0);
		    <selectKey resultType="java.lang.Integer" keyProperty="id" order="AFTER">
		select last_insert_id() as id
    </selectKey>
	</insert>
	    <!-- mapped statement for ThirdLoginDAO.selectThirdUser -->
	    <select id="selectThirdUser" resultMap="RM-THIRD-LOGIN">
		        select id,userId,openId,openMethod,unionId,publicOpenId,deleted from edu_third_login
			where deleted='0'
			<if test="query.userId !=null">
				and userId=#{query.userId}
			</if>
			<if test="query.openId !=null">
				and openId=#{query.openId}
			</if>
			<if test="query.unionId !=null">
				and unionId=#{query.unionId}
			</if>
			<if test="query.publicOpenId !=null">
				and publicOpenId=#{query.publicOpenId}
			</if>
			<if test="query.openMethod !=null">
				and openMethod=#{query.openMethod}
			</if>
		    </select>
	    <!-- mapped statement for ThirdLoginDAO.updateSetUnionID -->
	    <update id="updateSetUnionID">
		        update edu_third_login set
		<if test="update.unionId!=null">
		unionID=#{update.unionId}
		</if>
		<if test="update.publicOpenId!=null">
		publicOpenId=#{update.publicOpenId}
		</if>
		where deleted='0'
		<if test="update.openId!=null">
		 and openId=#{update.openId}
		</if>
		<if test="update.openMethod !=null">
				and openMethod=#{update.openMethod}
			</if>
		    </update>
	    <!-- mapped statement for ThirdLoginDAO.deleteUser -->
	    <update id="deleteUser">
		        update edu_third_login set
	         deleted=1  
		where deleted='0'
		and userId=#{userId}
		    </update>
	</mapper>